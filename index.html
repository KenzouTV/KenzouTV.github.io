<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KenzouTV — Accueil</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <meta name="description" content="KenzouTV — Création & animation, dernières vidéos.">
  <style>
    :root{
      --bg-1:#06070a;
      --accent:#ff7a18;
      --accent-2:#ff9b3b;
      --muted:rgba(255,255,255,0.65);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,Arial;
      color:#eaf0ff;
      padding:48px 24px;
      background:
        radial-gradient(800px 400px at 10% 80%, rgba(255,122,24,0.06), transparent 8%),
        radial-gradient(900px 450px at 90% 20%, rgba(255,155,59,0.06), transparent 8%),
        linear-gradient(180deg,#06070a, #071018 60%);
      background-size:200% 200%;
      animation: shiftGradient 20s linear infinite;
    }
    @keyframes shiftGradient { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

    /* Topbar : moins transparent + flou arrière (frosted glass) */
    nav.topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:12px 18px;
      border-radius:18px;
      max-width:1180px;margin:0 auto;
      position:sticky; top:22px; z-index:40;
      /* fond plus opaque */
      background: rgba(7,16,24,0.80);
      border:1px solid rgba(255,255,255,0.03);
      /* blur arrière */
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    }

    .brand{display:flex;gap:12px;align-items:center}
    .brand img{width:44px;height:44px;border-radius:10px;object-fit:cover}
    .title{font-weight:700}
    .navlinks{display:flex;gap:12px;align-items:center}
    .btn-discord{background:linear-gradient(180deg,var(--accent),var(--accent-2));padding:8px 14px;border-radius:12px;color:#0b0a0b;font-weight:700;border:none;cursor:pointer}

    .wrap{max-width:1180px;margin:32px auto}
    .hero{display:grid;grid-template-columns:1fr 420px;gap:34px;margin-top:28px}
    .card-left{padding:28px;border-radius:18px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)}
    h1{font-size:40px;margin:6px 0 14px;font-weight:800}
    .lead{color:rgba(234,240,255,0.8);margin-bottom:12px}

    /* Featured video style (simple embed) */
    .featured-video{border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);box-shadow:0 18px 40px rgba(0,0,0,0.5);background:#000}
    .featured-video iframe{width:100%;height:100%;min-height:320px;border:0;display:block}

    @media(max-width:980px){ .hero{grid-template-columns:1fr} .featured-video iframe{min-height:240px} h1{font-size:30px} }

    footer{margin-top:26px;text-align:center;color:rgba(255,255,255,0.18);font-size:13px}
  </style>
</head>
<body>
  <nav class="topbar" aria-label="Navigation">
    <div class="brand">
      <img src="profile-0.png" alt="logo KenzouTV">
      <div class="title">KenzouTV</div>
    </div>
    <div class="navlinks">
      <a href="#" class="active">Accueil</a>
      <button class="btn-discord" id="btnDiscord">Discord</button>
    </div>
  </nav>

  <main class="wrap">
    <section class="hero">
      <section class="card-left">
        <h1>EN CONSTRUCTION, MAIS DÉJÀ EN MOUVEMENT.</h1>
        <p class="lead">Je me lance dans l’animation et la création de vidéos.</p>

        <div class="small">Dernière vidéo automatiquement récupérée depuis la chaîne (les lives sont ignorés).</div>
      </section>

      <aside>
        <div class="featured-video" id="featuredContainer" aria-live="polite">
          <!-- iframe mis à jour automatiquement -->
          <iframe id="featuredIframe" title="Dernière vidéo KenzouTV" src="about:blank"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div id="videoMeta" style="margin-top:10px;color:rgba(255,255,255,0.8);font-weight:600"></div>
      </aside>
    </section>

    <footer>© 2026 KenzouTV — TOUS DROITS RÉSERVÉS</footer>
  </main>

  <script>
    // ===== CONFIG =====
    // Option rapide (client-side). Remplace par ta clé & ton channelId.
    const API_KEY = 'YOUR_API_KEY';           // <<-- Remplace (client-side : exposé)
    const CHANNEL_ID = 'YOUR_CHANNEL_ID';     // <<-- Remplace (ex: UCxxxxxxxx)

    // YouTube API helper: cherche les vidéos les plus récentes et ignore les lives.
    // On utilise search.list?order=date&type=video&part=snippet pour lister par date,
    // puis on prend le premier résultat avec snippet.liveBroadcastContent === 'none'.
    // Docs: search.list (order=date, type=video). Si besoin d'info détaillée, on peut appeler videos.list ensuite.
    // (Note: l'approche est standard ; si une vidéo live apparaît tu dois boucler jusqu'au prochain item).
    async function fetchLatestNonLiveVideo(channelId, apiKey) {
      const maxFetch = 10; // nombre max de résultats à vérifier (sécurité)
      const url = 'https://www.googleapis.com/youtube/v3/search?part=snippet&channelId='
                + encodeURIComponent(channelId)
                + '&order=date&type=video&maxResults=' + maxFetch
                + '&key=' + encodeURIComponent(apiKey);
      const res = await fetch(url);
      if (!res.ok) throw new Error('YouTube API error: ' + res.status);
      const data = await res.json();
      if (!data.items || data.items.length === 0) return null;
      // Trouve le premier item qui n'est pas live (snippet.liveBroadcastContent === 'none')
      for (const item of data.items) {
        const liveFlag = item.snippet && item.snippet.liveBroadcastContent;
        if (liveFlag === 'none') {
          return {
            id: item.id.videoId,
            title: item.snippet.title,
            publishedAt: item.snippet.publishedAt,
            thumb: item.snippet.thumbnails && (item.snippet.thumbnails.high || item.snippet.thumbnails.default)
          };
        }
      }
      return null;
    }

    // Initialise l'iframe avec la vidéo trouvée (autoplay=false par défaut)
    async function init() {
      const iframe = document.getElementById('featuredIframe');
      const meta = document.getElementById('videoMeta');

      if (!API_KEY || API_KEY === 'YOUR_API_KEY') {
        // fallback : laisse une vidéo par défaut si pas de clé
        const fallbackId = 'REPLACE_WITH_FALLBACK_ID';
        iframe.src = 'https://www.youtube.com/embed/' + fallbackId + '?rel=0';
        meta.textContent = 'Clé API manquante — affichage de la vidéo fallback.';
        return;
      }

      try {
        const vid = await fetchLatestNonLiveVideo(CHANNEL_ID, API_KEY);
        if (!vid) {
          meta.textContent = 'Aucune vidéo récente non-live trouvée.';
          // fallback si tu veux : charger une vidéo statique
          iframe.src = 'about:blank';
          return;
        }
        iframe.src = 'https://www.youtube.com/embed/' + encodeURIComponent(vid.id) + '?rel=0';
        const published = new Date(vid.publishedAt).toLocaleDateString('fr-FR', {year:'numeric',month:'short',day:'numeric'});
        meta.textContent = vid.title + ' — publié le ' + published;
      } catch (err) {
        console.error(err);
        meta.textContent = 'Erreur récupération vidéo : ' + err.message;
      }
    }

    // Discord button (si tu veux garder)
    document.getElementById('btnDiscord').addEventListener('click', ()=> window.open('https://discord.gg/KURpXHzRTE','_blank','noopener'));

    // Lance
    init();
  </script>
</body>
</html>
